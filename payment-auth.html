<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Payment Authentication - Namrata's Store</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css" />

    <style>
      .auth-container {
        min-height: 100vh;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        position: relative;
        overflow: hidden;
      }

      .auth-container::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
        opacity: 0.3;
      }

      .auth-card {
        animation: slideUp 0.8s ease-out;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .security-icon {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      .progress-bar {
        transition: width 0.5s ease;
      }

      .step-indicator {
        transition: all 0.3s ease;
      }

      .step-indicator.active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }

      .form-floating .form-control:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
      }

      .btn-auth {
        transition: all 0.3s ease;
        border-radius: 10px;
      }

      .btn-auth:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
      }

      .verification-code {
        letter-spacing: 0.5em;
        font-weight: bold;
      }

      .timer {
        font-size: 1.2rem;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div
      class="auth-container d-flex align-items-center justify-content-center"
    >
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-6 col-md-8 col-sm-12">
            <div
              class="card border-0 shadow-lg rounded-4 overflow-hidden auth-card"
            >
              <!-- Header -->
              <div
                class="card-header bg-gradient-primary text-white text-center py-4 border-0"
              >
                <div class="position-relative mb-3">
                  <div
                    class="bg-white bg-opacity-20 rounded-circle d-inline-flex align-items-center justify-content-center"
                    style="width: 70px; height: 70px"
                  >
                    <i class="fas fa-shield-alt fa-2x security-icon"></i>
                  </div>
                </div>
                <h4 class="fw-bold mb-2">Payment Authentication</h4>
                <p class="mb-0 opacity-75">Secure verification required</p>
              </div>

              <!-- Progress Steps -->
              <div class="p-4 bg-light">
                <div
                  class="d-flex justify-content-between align-items-center mb-3"
                >
                  <div
                    class="step-indicator active rounded-circle d-flex align-items-center justify-content-center"
                    style="width: 40px; height: 40px"
                  >
                    <i class="fas fa-credit-card"></i>
                  </div>
                  <div class="progress flex-grow-1 mx-3" style="height: 4px">
                    <div
                      class="progress-bar bg-primary"
                      style="width: 33%"
                    ></div>
                  </div>
                  <div
                    class="step-indicator rounded-circle d-flex align-items-center justify-content-center"
                    style="width: 40px; height: 40px"
                  >
                    <i class="fas fa-mobile-alt"></i>
                  </div>
                  <div class="progress flex-grow-1 mx-3" style="height: 4px">
                    <div
                      class="progress-bar bg-secondary"
                      style="width: 0%"
                    ></div>
                  </div>
                  <div
                    class="step-indicator rounded-circle d-flex align-items-center justify-content-center"
                    style="width: 40px; height: 40px"
                  >
                    <i class="fas fa-check"></i>
                  </div>
                </div>
                <div class="d-flex justify-content-between text-muted small">
                  <span>Payment Details</span>
                  <span>OTP Verification</span>
                  <span>Complete</span>
                </div>
              </div>

              <!-- Body -->
              <div class="card-body p-4">
                <!-- Step 1: Payment Details -->
                <div id="step1" class="auth-step">
                  <div class="text-center mb-4">
                    <div
                      class="bg-primary bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3"
                      style="width: 60px; height: 60px"
                    >
                      <i class="fas fa-credit-card fa-2x text-primary"></i>
                    </div>
                    <h5 class="fw-bold text-primary">Payment Information</h5>
                    <p class="text-muted">Please verify your payment details</p>
                  </div>

                  <!-- Payment Summary -->
                  <div class="card border-0 bg-light mb-4">
                    <div class="card-body p-4">
                      <div class="row">
                        <div class="col-md-6">
                          <h6 class="fw-bold text-primary mb-3">
                            Order Summary
                          </h6>
                          <div class="d-flex justify-content-between mb-2">
                            <span class="text-muted">Amount:</span>
                            <span class="fw-bold">Rs. 1,500.00</span>
                          </div>
                          <div class="d-flex justify-content-between mb-2">
                            <span class="text-muted">VAT (13%):</span>
                            <span class="fw-bold">Rs. 195.00</span>
                          </div>
                          <div class="d-flex justify-content-between mb-2">
                            <span class="text-muted">Delivery:</span>
                            <span class="fw-bold">Rs. 100.00</span>
                          </div>
                          <hr />
                          <div class="d-flex justify-content-between">
                            <span class="fw-bold text-primary">Total:</span>
                            <span class="fw-bold text-success fs-5"
                              >Rs. 1,795.00</span
                            >
                          </div>
                        </div>
                        <div class="col-md-6">
                          <h6 class="fw-bold text-primary mb-3">
                            Payment Method
                          </h6>
                          <div class="d-flex align-items-center mb-3">
                            <img
                              src="https://esewa.com.np/images/esewa-logo.png"
                              alt="eSewa"
                              style="height: 30px; width: auto"
                              class="me-3"
                            />
                            <span class="fw-bold">eSewa Wallet</span>
                          </div>
                          <div class="badge bg-success-subtle text-success">
                            <i class="fas fa-shield-alt me-1"></i>Secure Payment
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Action Buttons -->
                  <div class="d-grid gap-3">
                    <button
                      class="btn btn-primary btn-auth py-3"
                      onclick="nextStep()"
                    >
                      <i class="fas fa-arrow-right me-2"></i>Proceed to
                      Verification
                    </button>
                    <button
                      class="btn btn-outline-secondary"
                      onclick="window.history.back()"
                    >
                      <i class="fas fa-arrow-left me-2"></i>Go Back
                    </button>
                  </div>
                </div>

                <!-- Step 2: OTP Verification -->
                <div id="step2" class="auth-step" style="display: none">
                  <div class="text-center mb-4">
                    <div
                      class="bg-warning bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3"
                      style="width: 60px; height: 60px"
                    >
                      <i class="fas fa-mobile-alt fa-2x text-warning"></i>
                    </div>
                    <h5 class="fw-bold text-warning">OTP Verification</h5>
                    <p class="text-muted">
                      Enter the 6-digit code sent to your mobile
                    </p>
                  </div>

                  <!-- OTP Input -->
                  <div class="mb-4">
                    <div class="d-flex justify-content-center gap-2 mb-3">
                      <input
                        type="text"
                        class="form-control text-center verification-code"
                        maxlength="1"
                        style="width: 50px; height: 50px; font-size: 1.5rem"
                      />
                      <input
                        type="text"
                        class="form-control text-center verification-code"
                        maxlength="1"
                        style="width: 50px; height: 50px; font-size: 1.5rem"
                      />
                      <input
                        type="text"
                        class="form-control text-center verification-code"
                        maxlength="1"
                        style="width: 50px; height: 50px; font-size: 1.5rem"
                      />
                      <input
                        type="text"
                        class="form-control text-center verification-code"
                        maxlength="1"
                        style="width: 50px; height: 50px; font-size: 1.5rem"
                      />
                      <input
                        type="text"
                        class="form-control text-center verification-code"
                        maxlength="1"
                        style="width: 50px; height: 50px; font-size: 1.5rem"
                      />
                      <input
                        type="text"
                        class="form-control text-center verification-code"
                        maxlength="1"
                        style="width: 50px; height: 50px; font-size: 1.5rem"
                      />
                    </div>
                    <div class="text-center">
                      <p class="text-muted mb-2">
                        Code expires in
                        <span class="timer text-danger">05:00</span>
                      </p>
                      <button
                        class="btn btn-link text-primary"
                        onclick="resendOTP()"
                      >
                        <i class="fas fa-redo me-1"></i>Resend Code
                      </button>
                    </div>
                  </div>

                  <!-- Action Buttons -->
                  <div class="d-grid gap-3">
                    <button
                      class="btn btn-warning btn-auth py-3"
                      onclick="verifyOTP()"
                    >
                      <i class="fas fa-check me-2"></i>Verify & Complete Payment
                    </button>
                    <button
                      class="btn btn-outline-secondary"
                      onclick="prevStep()"
                    >
                      <i class="fas fa-arrow-left me-2"></i>Back
                    </button>
                  </div>
                </div>

                <!-- Step 3: Success -->
                <div id="step3" class="auth-step" style="display: none">
                  <div class="text-center mb-4">
                    <div
                      class="bg-success bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3"
                      style="width: 60px; height: 60px"
                    >
                      <i class="fas fa-check-circle fa-2x text-success"></i>
                    </div>
                    <h5 class="fw-bold text-success">Payment Successful!</h5>
                    <p class="text-muted">
                      Your payment has been verified and processed
                    </p>
                  </div>

                  <!-- Success Details -->
                  <div class="card border-0 bg-success bg-opacity-10 mb-4">
                    <div class="card-body p-4 text-center">
                      <h6 class="fw-bold text-success mb-3">
                        <i class="fas fa-receipt me-2"></i>Transaction Details
                      </h6>
                      <p class="mb-2">
                        <strong>Transaction ID:</strong>
                        <span class="text-primary"
                          >TXN-<span id="transactionId"></span
                        ></span>
                      </p>
                      <p class="mb-2">
                        <strong>Amount:</strong>
                        <span class="fw-bold">Rs. 1,795.00</span>
                      </p>
                      <p class="mb-0">
                        <strong>Status:</strong>
                        <span class="badge bg-success">Completed</span>
                      </p>
                    </div>
                  </div>

                  <!-- Action Buttons -->
                  <div class="d-grid gap-3">
                    <a
                      href="success.html"
                      class="btn btn-success btn-auth py-3"
                    >
                      <i class="fas fa-home me-2"></i>View Order Details
                    </a>
                    <a href="index.html" class="btn btn-outline-primary">
                      <i class="fas fa-shopping-bag me-2"></i>Continue Shopping
                    </a>
                  </div>
                </div>
              </div>

              <!-- Footer -->
              <div class="card-footer bg-light border-0 text-center py-3">
                <div
                  class="d-flex justify-content-center gap-4 text-muted small"
                >
                  <span><i class="fas fa-lock me-1"></i>256-bit SSL</span>
                  <span
                    ><i class="fas fa-shield-alt me-1"></i>PCI Compliant</span
                  >
                  <span><i class="fas fa-check-circle me-1"></i>Verified</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      let currentStep = 1;
      let timer = 300; // 5 minutes in seconds

      // Generate random transaction ID
      document.getElementById("transactionId").textContent = Math.random()
        .toString(36)
        .substr(2, 9)
        .toUpperCase();

      // OTP input handling
      const otpInputs = document.querySelectorAll(".verification-code");
      otpInputs.forEach((input, index) => {
        input.addEventListener("input", function () {
          if (this.value.length === 1 && index < otpInputs.length - 1) {
            otpInputs[index + 1].focus();
          }
        });

        input.addEventListener("keydown", function (e) {
          if (e.key === "Backspace" && this.value.length === 0 && index > 0) {
            otpInputs[index - 1].focus();
          }
        });
      });

      // Timer countdown
      function updateTimer() {
        const minutes = Math.floor(timer / 60);
        const seconds = timer % 60;
        document.querySelector(".timer").textContent = `${minutes
          .toString()
          .padStart(2, "0")}:${seconds.toString().padStart(2, "0")}`;

        if (timer > 0) {
          timer--;
          setTimeout(updateTimer, 1000);
        } else {
          document.querySelector(".timer").textContent = "00:00";
          document.querySelector(".timer").classList.add("text-danger");
        }
      }

      function nextStep() {
        if (currentStep === 1) {
          document.getElementById("step1").style.display = "none";
          document.getElementById("step2").style.display = "block";
          currentStep = 2;
          updateProgress(66);
          updateTimer();
        }
      }

      function prevStep() {
        if (currentStep === 2) {
          document.getElementById("step2").style.display = "none";
          document.getElementById("step1").style.display = "block";
          currentStep = 1;
          updateProgress(33);
        }
      }

      function verifyOTP() {
        // Simulate OTP verification
        setTimeout(() => {
          document.getElementById("step2").style.display = "none";
          document.getElementById("step3").style.display = "block";
          currentStep = 3;
          updateProgress(100);
        }, 1000);
      }

      function resendOTP() {
        timer = 300;
        updateTimer();
        // Add resend logic here
      }

      function updateProgress(percentage) {
        const progressBars = document.querySelectorAll(".progress-bar");
        progressBars.forEach((bar) => {
          bar.style.width = percentage + "%";
        });

        // Update step indicators
        const indicators = document.querySelectorAll(".step-indicator");
        indicators.forEach((indicator, index) => {
          indicator.classList.remove("active");
          if (index < currentStep) {
            indicator.classList.add("active");
          }
        });
      }

      // Initialize
      updateProgress(33);
    </script>
  </body>
</html>
